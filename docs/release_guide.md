# Руководство по созданию релизов и сборке .deb пакетов в GitHub

## Что такое релиз в GitHub?

**Релиз (Release)** — это способ упаковать и опубликовать готовую версию вашего проекта. Когда вы создаете релиз, GitHub позволяет:
- Прикрепить файлы (например, .deb пакеты)
- Добавить описание изменений
- Создать тег версии (например, v1.0.0)
- Сделать версию доступной для скачивания

Представьте, что релиз — это "упакованная коробка" с вашей программой, которую пользователи могут скачать и установить.

## Простой процесс создания релиза

### Шаг 1: Подготовка версии

Перед созданием релиза убедитесь, что ваш код готов:
1. Все изменения закоммичены в репозиторий
2. Код протестирован и работает
3. Вы решили, какая это версия (например, 1.0.0, 1.1.0, 2.0.0)

**Система версий (семантическое версионирование):**
- **1.0.0** — первая стабильная версия
- **1.1.0** — добавлены новые функции (обратная совместимость)
- **1.0.1** — исправлены ошибки
- **2.0.0** — большие изменения, возможна несовместимость

### Шаг 2: Создание тега версии

**Тег (Tag)** — это "закладка" в истории вашего кода, которая отмечает конкретную версию.

**Способ 1: Через GitHub веб-интерфейс (самый простой)**
1. Откройте ваш репозиторий на GitHub
2. Нажмите на "Releases" (справа в меню)
3. Нажмите "Create a new release"
4. В поле "Tag version" введите версию (например, `v1.0.0`)
5. Нажмите "Create tag: v1.0.0 on publish" (создастся новый тег)
6. Заполните название и описание
7. Нажмите "Publish release"

**Способ 2: Через командную строку**
```bash
# Создать тег локально
git tag v1.0.0

# Отправить тег на GitHub
git push origin v1.0.0
```

### Шаг 3: Автоматическая сборка .deb пакета

После настройки GitHub Actions (см. ниже), при создании тега автоматически:
1. Запустится процесс сборки на серверах GitHub
2. Создастся .deb пакет
3. Пакет автоматически прикрепится к релизу

**Вам не нужно ничего делать вручную!** GitHub сделает всё автоматически.

## Как работает автоматическая сборка

### Что такое GitHub Actions?

**GitHub Actions** — это система автоматизации, которая выполняет задачи при определенных событиях (например, при создании тега).

**Аналогия:** Представьте робота-помощника, который:
- Видит, что вы создали новый тег
- Берет ваш код
- Собирает из него .deb пакет
- Прикрепляет пакет к релизу

### Процесс сборки .deb пакета

1. **Скачивание кода** — GitHub берет код из вашего репозитория
2. **Установка зависимостей** — устанавливаются Python и необходимые инструменты
3. **Сборка пакета** — создается структура .deb пакета:
   - Исполняемые файлы
   - Метаданные (версия, описание, зависимости)
   - Скрипты установки/удаления
4. **Публикация** — готовый .deb файл прикрепляется к релизу

## Настройка автоматической сборки (один раз)

После того, как вы добавите файлы из этого руководства в проект, всё будет работать автоматически.

### Что нужно добавить в проект:

1. **`.github/workflows/build-deb.yml`** — инструкции для GitHub Actions
2. **`debian/`** — папка с метаданными для .deb пакета

Эти файлы уже созданы в проекте. **Перед первым использованием нужно:**

1. **Обновить информацию о себе** в файле `debian/control`:
   - Замените `Your Name` на ваше имя
   - Замените `your.email@example.com` на ваш email

2. **Обновить changelog** в файле `debian/changelog`:
   - Замените `Your Name` на ваше имя
   - Замените `your.email@example.com` на ваш email
   - Обновите дату на текущую

3. Закоммитить все файлы в репозиторий
4. Запушить на GitHub
5. Создать тег — и сборка запустится автоматически!

## Пошаговая инструкция для первого релиза

### 1. Обновите информацию о себе

Откройте файл `debian/control` и замените:
- `Your Name` → ваше имя
- `your.email@example.com` → ваш email

Откройте файл `debian/changelog` и замените:
- `Your Name` → ваше имя  
- `your.email@example.com` → ваш email
- Дату на текущую

### 2. Добавьте файлы автоматизации в репозиторий

```bash
# Убедитесь, что вы в корне проекта
cd xgamma_gui_tool

# Добавьте новые файлы
git add .github/workflows/build-deb.yml
git add debian/

# Закоммитьте изменения
git commit -m "Добавлена автоматическая сборка .deb пакетов"

# Отправьте на GitHub
git push origin main
```

### 3. Создайте первый релиз

**Через веб-интерфейс GitHub:**
1. Откройте https://github.com/ваш-username/xgamma_gui_tool
2. Нажмите "Releases" → "Create a new release"
3. В "Tag version" введите: `v1.0.0`
4. Выберите "Create tag: v1.0.0 on publish"
5. Заполните:
   - **Title:** `xgamma GUI Tool v1.0.0`
   - **Description:** Описание изменений (можно оставить пустым для первого релиза)
6. Нажмите "Publish release"

### 4. Проверьте процесс сборки

1. После публикации релиза перейдите на вкладку "Actions" в вашем репозиторий
2. Вы увидите запущенный процесс "Build DEB package"
3. Подождите 2-5 минут (процесс сборки)
4. Когда увидите зеленую галочку ✅ — сборка завершена успешно

### 5. Скачайте готовый пакет

1. Вернитесь на страницу "Releases"
2. Откройте созданный релиз
3. В разделе "Assets" вы увидите файл `xgamma-gui-tool_1.0.0-1_all.deb`
4. Нажмите на него для скачивания

## Установка .deb пакета пользователями

Пользователи могут установить ваш пакет командой:

```bash
sudo dpkg -i xgamma-gui-tool_1.0.0-1_all.deb
```

Или через графический установщик пакетов (двойной клик по файлу).

## Создание следующих релизов

Для каждого нового релиза просто:
1. Обновите код
2. Закоммитьте изменения
3. Создайте новый тег (например, `v1.1.0`)
4. GitHub автоматически соберет новый .deb пакет

## Часто задаваемые вопросы

**Q: Нужно ли мне что-то настраивать каждый раз?**  
A: Нет! После первой настройки всё работает автоматически.

**Q: Что если сборка не удалась?**  
A: Проверьте вкладку "Actions" — там будет указана причина ошибки. Чаще всего это проблемы с зависимостями или синтаксисом.

**Q: Можно ли собрать пакет вручную?**  
A: Да, но это сложнее. Автоматизация через GitHub Actions — самый простой способ.

**Q: Где хранятся собранные пакеты?**  
A: Они автоматически прикрепляются к релизу и хранятся на GitHub. Пользователи могут скачать их оттуда.

## Полезные ссылки

- [Документация GitHub Releases](https://docs.github.com/en/repositories/releasing-projects-on-github)
- [Документация GitHub Actions](https://docs.github.com/en/actions)
- [Руководство по созданию .deb пакетов](https://www.debian.org/doc/manuals/debmake-doc/ch04.en.html)

